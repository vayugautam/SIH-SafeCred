%% File: /docs/system-diagram.mmd
flowchart LR
    Applicant["Applicant (Web Form + File Upload)"]
    Frontend["React Frontend (Applicant, Officer, Admin)"]
    Backend["Express Backend / Orchestrator"]
    DB["Database (MongoDB / Postgres)"]
    Storage["File Storage (S3 / MinIO)"]
    RepayParser["Repayment Parser Module"]
    IncomeInf["Income Inference Module"]
    ProxyEval["Proxy Evaluation Service"]
    MLService["ML Scoring Service (FastAPI)"]
    OfficerDash["Officer Dashboard"]
    AdminDash["Admin Dashboard"]
    Notification["Notification Service (Email/SMS)"]
    FraudEngine["Fraud Heuristics"]

    Applicant -->|submit| Frontend
    Frontend -->|POST /apply| Backend
    Backend --> Storage
    Backend --> DB
    Backend --> RepayParser
    RepayParser --> IncomeInf
    IncomeInf --> ProxyEval
    ProxyEval --> MLService
    Backend -->|call ML| MLService
    MLService -->|score + explain| Backend
    Backend --> DB
    Backend --> OfficerDash
    Backend --> AdminDash
    Backend --> Notification
    Backend --> FraudEngine
